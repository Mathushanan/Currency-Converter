<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Currency Converter</title>
  <style>
    .container {
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    .converter {
      display: flex;
      align-items: center;
    }

    input[type="number"] {
      padding: 5px;
      width: 100px;
      margin-right: 10px;
    }

    input[type="text"] {
      padding: 5px;
      width: 150px;
      margin-right: 10px;
    }

    select {
      padding: 5px;
      margin-right: 10px;
      width: 150px;
    }

    button {
      padding: 5px 10px;
      background-color: #007bff;
      color: #fff;
      border: none;
      cursor: pointer;
    }

    #result {
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>





<body>
  <div class="container">
    <h1>Currency Converter</h1>
    <div class="converter">
      <input type="number" id="amount" placeholder="Enter amount">
      <input type="text" id="searchCurrency" placeholder="Search currency">
      <select id="fromCurrency">
        <!-- Add options for currencies here -->
      </select>
      <select id="toCurrency">
        <!-- Add options for currencies here -->
      </select>
      <button onclick="convertCurrency()">Convert</button>
    </div>
    <p id="result"></p>
  </div>





  
  <script>
    const apiURL = 'https://api.currencyfreaks.com/v2.0/rates/latest?apikey=7b926469d6bf4ee683361fc52bb6457c';
    const supportedCurrenciesURL = 'https://api.currencyfreaks.com/v2.0/supported-currencies';

    // Function to handle filtering of the "from" and "to" select dropdowns
    function filterCurrencies(input, dropdown) {
      const filterValue = input.value.toLowerCase();
      const options = dropdown.getElementsByTagName("option");

      for (let i = 0; i < options.length; i++) {
        const text = options[i].textContent || options[i].innerText;
        const shouldDisplay = text.toLowerCase().indexOf(filterValue) > -1;
        options[i].style.display = shouldDisplay ? "" : "none";
      }
    }

    // Function to fetch supported currencies and populate the dropdowns
    async function getSupportedCurrencies() {
      try {
        const response = await fetch(supportedCurrenciesURL);
        const data = await response.json();

        if (data && data.supportedCurrenciesMap) {
          const supportedCurrencies = data.supportedCurrenciesMap;
          const fromCurrencyDropdown = document.getElementById("fromCurrency");
          const toCurrencyDropdown = document.getElementById("toCurrency");

          for (const currencyCode in supportedCurrencies) {
            if (supportedCurrencies.hasOwnProperty(currencyCode)) {
              const currencyName = supportedCurrencies[currencyCode].currencyName;
              const option = document.createElement("option");
              option.value = currencyCode;
              option.textContent = `${currencyCode} - ${currencyName}`;
              fromCurrencyDropdown.appendChild(option);

              const optionClone = option.cloneNode(true);
              toCurrencyDropdown.appendChild(optionClone);
            }
          }
        }
      } catch (error) {
        console.error('Error fetching supported currencies:', error);
      }
    }

    // Function to fetch currency rates and perform the conversion
    async function convertCurrency() {
      const amount = parseFloat(document.getElementById("amount").value);
      const fromCurrency = document.getElementById("fromCurrency").value;
      const toCurrency = document.getElementById("toCurrency").value;

      if (isNaN(amount)) {
        alert("Please enter a valid amount.");
        return;
      }

      if (fromCurrency === toCurrency) {
        document.getElementById("result").textContent = "Result: " + amount.toFixed(2) + " " + toCurrency;
        return;
      }

      try {
        const response = await fetch(apiURL);
        const data = await response.json();

        if (data && data.rates) {
          const rates = data.rates;

          if (rates.hasOwnProperty(fromCurrency) && rates.hasOwnProperty(toCurrency)) {
            const result = (amount / rates[fromCurrency]) * rates[toCurrency];
            document.getElementById("result").textContent = "Result: " + result.toFixed(2) + " " + toCurrency;
          } else {
            alert("Selected currencies are not supported.");
          }
        }
      } catch (error) {
        console.error('Error fetching currency rates:', error);
      }
    }

    // Call the function to populate the dropdowns when the page loads
    getSupportedCurrencies();
    
    // Add event listener to the search input field to filter currencies
    const searchCurrency = document.getElementById("searchCurrency");
    const fromCurrencyDropdown = document.getElementById("fromCurrency");
    const toCurrencyDropdown = document.getElementById("toCurrency");

    searchCurrency.addEventListener("input", () => {
      filterCurrencies(searchCurrency, fromCurrencyDropdown);
      filterCurrencies(searchCurrency, toCurrencyDropdown);
    });
  </script>
</body>
</html>
